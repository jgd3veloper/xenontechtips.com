!function(l){function e(e,o){new premiumWooProducts(e).init()}window.premiumWooProducts=function(r){var d=this,s=r.find(".premium-woocommerce"),o=s.data("quick-view");if("yes"===o)var e=r.data("id"),i=s.siblings(".premium-woo-quick-view-"+e),a=i.find("#premium-woo-quick-view-modal"),c=a.find("#premium-woo-quick-view-content"),t=a.find(".premium-woo-content-main-wrapper"),n=i.find(".premium-woo-quick-view-back");d.init=function(){d.handleProductsCarousel(),"yes"===o&&d.handleProductQuickView(),d.handleProductPagination();var e=r.data("widget_type");"premium-woo-products.grid-1"!==e&&"premium-woo-products.grid-4"!==e||d.handleAddToCart(),"premium-woo-products.grid-6"===e&&d.handleGalleryImages(),s.hasClass("premium-woo-products-metro")&&(d.handleGridMetro(),l(window).on("resize",d.handleGridMetro))},d.handleProductsCarousel=function(){var e=s.data("woo_carousel");if(e){var o=s.find("ul.products");e.customPaging=function(){return'<i class="fas fa-circle"></i>'},o.slick(e)}},d.handleGridMetro=function(){var e=s.find("ul.products"),o=elementorFrontend.getCurrentDeviceMode(),i="",t=e.width(),a=Math.floor(t/12);if("tablet"===o?i="_tablet":"mobile"===o&&(i="_mobile"),"custom"===s.data("metro-style")){var r=0,d=0,n=s.data("metro"),c=n["wPattern"+i],u=n["hPattern"+i];""===c&&(c="12"),""===u&&(u="12"),c=c.split(","),u=u.split(","),r+=c.length,d+=u.length,e.find("li.product").each(function(e,o){var i=e%d,t=parseInt(c[e%r]),n=parseInt(u[i]);l(o).css({width:Math.floor(t)*a,height:Math.floor(n)*a})})}e.imagesLoaded(function(){}).done(function(){e.isotope({itemSelector:"li.product",percentPosition:!0,animationOptions:{duration:750,easing:"linear"},layoutMode:"masonry",masonry:{columnWidth:a}})})},d.handleProductQuickView=function(){i.appendTo(document.body),s.on("click",".premium-woo-qv-btn",d.triggerQuickViewModal),window.addEventListener("resize",function(){d.updateQuickViewHeight()})},d.triggerQuickViewModal=function(e){e.preventDefault();var o=l(this).data("product-id");a.hasClass("loading")||a.addClass("loading"),n.hasClass("premium-woo-quick-view-active")||n.addClass("premium-woo-quick-view-active"),l(document).trigger("uael_quick_view_loading"),d.getProductByAjax(o),d.addCloseEvents()},d.getProductByAjax=function(e){l.ajax({url:PremiumWooSettings.ajaxurl,data:{action:"get_woo_product_qv",product_id:e,nonce:PremiumWooSettings.qv_nonce},dataType:"html",type:"POST",success:function(e){c.html(e),d.handleQuickViewModal()}})},d.addCloseEvents=function(){var e=a.find("#premium-woo-quick-view-close");l(document).keyup(function(e){27===e.keyCode&&d.closeModal()}),e.on("click",function(e){e.preventDefault(),d.closeModal()}),t.on("click",function(e){this===e.target&&d.closeModal()})},d.handleQuickViewModal=function(){if(!a.hasClass("active")){a.removeClass("loading").addClass("active");var e=d.getBarWidth();l("html").css("margin-right",e),l("html").addClass("premium-woo-qv-opened")}c.imagesLoaded(function(){d.handleQuickViewSlider()})},d.getBarWidth=function(){var e=l('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');l("body").append(e);var o=l("div",e).innerWidth();e.css("overflow-y","scroll");var i=l("div",e).innerWidth();return l(e).remove(),o-i},d.handleQuickViewSlider=function(){var e=a.find(".premium-woo-qv-image-slider");e.find("li").length?e.flexslider({animation:"slide",start:function(){setTimeout(function(){d.updateQuickViewHeight(!0)},300)}}):setTimeout(function(){d.updateQuickViewHeight(!0)},300)},d.updateQuickViewHeight=function(e){var o=c,i=o.find(".product .uael-qv-image-slider").first().height(),t=o.find(".product .summary.entry-summary"),n=t.css("content");void 0!==n&&544==n.replace(/[^0-9]/g,"")&&0!=i&&null!==i?t.css("height",i):t.css("height",""),!0===e&&a.css("opacity",1)},d.closeModal=function(){n.removeClass("premium-woo-quick-view-active"),a.removeClass("active").removeClass("loading"),l("html").removeClass("premium-woo-qv-opened"),l("html").css("margin-right",""),setTimeout(function(){c.html("")},600)},d.handleAddToCart=function(){s.on("click",".premium-woo-cart-btn.product_type_simple",d.onBtnClick).on("premium_product_add_to_cart",d.handleBtnClick)},d.onBtnClick=function(e){e.preventDefault();var o=l(this),i=o.data("product_id");o.removeClass("added").addClass("adding"),l.ajax({url:PremiumWooSettings.ajaxurl,type:"POST",data:"action=premium_woo_add_cart_product&product_id="+i+"&quantity=1",success:function(){l(document.body).trigger("wc_fragment_refresh"),s.trigger("premium_product_add_to_cart",[o])}})},d.handleBtnClick=function(e,o){o&&o.removeClass("adding").addClass("added")},d.handleGalleryImages=function(){s.on("click",".premium-woo-product__gallery_image",function(){var e=l(this);e.closest(".premium-woo-product-thumbnail").find(".woocommerce-loop-product__link img").replaceWith(e.clone(!0))})},d.handleProductPagination=function(){s.on("click",".premium-woo-products-pagination a.page-numbers",function(e){var o=l(this);if(!s.hasClass("premium-woo-query-main")){e.preventDefault(),s.find("ul.products").after('<div class="premium-loading-feed"><div class="premium-loader"></div></div>');var i=s.data("page-id"),t=s.find(".page-numbers.current").index(),n=s.data("skin"),a=1;a=o.hasClass("next")?t+1:o.hasClass("prev")?t-1:o.html(),l.ajax({url:PremiumWooSettings.ajaxurl,data:{action:"get_woo_products",pageID:i,elemID:r.data("id"),category:"",skin:n,page_number:a,nonce:PremiumWooSettings.products_nonce},dataType:"json",type:"POST",success:function(e){s.find(".premium-loading-feed").remove(),l("html, body").animate({scrollTop:r.find(".premium-woocommerce").offset().top-100},"slow"),s.find("ul.products").replaceWith(e.data.html),s.find(".premium-woo-products-pagination").replaceWith(e.data.pagination),s.hasClass("premium-woo-products-metro")&&d.handleGridMetro()},error:function(e){console.log(e)}})}})}},l(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-1",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-2",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-3",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-4",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-5",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-6",e)})}(jQuery);