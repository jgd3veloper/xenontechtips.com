(window.yoastPremiumWebpackJsonp=window.yoastPremiumWebpackJsonp||[]).push([[4],{100:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wpseoDeleteRedirect=o,t.wpseoRemoveNotification=n,t.wpseoUndoRedirect=function(e,t,r,i,s){o(e,t,r).then(function(e){"true"===e&&n(s)})},t.wpseoCreateRedirect=function(e,t,r,i){var o="";if(410!==parseInt(t,10)&&""===(o=window.prompt(wpseoPremiumStrings.enter_new_url.replace("%s",e))))return void window.alert(wpseoPremiumStrings.error_new_url);jQuery.post(ajaxurl,{action:"wpseo_add_redirect_plain",ajax_nonce:r,redirect:{origin:e,target:o,type:t}},function(e){var r=jQuery(i).closest(".yoast-alert");if(jQuery(r).removeClass("updated").removeClass("error"),jQuery(r).find(".redirect_error").remove(),e.error)jQuery(r).addClass("error").prepend('<p class="redirect_error">'+e.error.message+"</p>");else{var o="";o=(o=410===parseInt(t,10)?wpseoPremiumStrings.redirect_saved_no_target:wpseoPremiumStrings.redirect_saved.replace("%2$s","<code>"+e.target+"</code>")).replace("%1$s","<code>"+e.origin+"</code>"),jQuery(r).addClass("updated").html("<p>"+o+"</p>")}},"json")};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(79));function o(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"plain";return(0,i.default)({method:"POST",url:wpApiSettings.root+"yoast/v1/redirects/delete",headers:{"X-WP-Nonce":wpApiSettings.nonce},data:{origin:e,target:t,type:r,format:o}})}function n(e){jQuery(e).closest(".yoast-alert").fadeOut("slow")}},640:function(e,t,r){"use strict";var i=r(100);!function(e){var t,r=[410,451],o=1,n=2,s=0,a=13,d=function(e){this.form=e};d.prototype.getOriginField=function(){return this.form.find("input[name=wpseo_redirects_origin]")},d.prototype.getTargetField=function(){return this.form.find("input[name=wpseo_redirects_target]")},d.prototype.getTypeField=function(){return this.form.find("select[name=wpseo_redirects_type]")},d.prototype.clearErrorMessage=function(){this.form.find(".wpseo_redirect_form .form_error").remove()},d.prototype.setErrorMessage=function(e){this.form.find(".wpseo_redirect_form").prepend('<div class="form_error error"><p>'+e+"</p></div>")},d.prototype.removeRowHighlights=function(){this.form.find(".redirect_form_row").removeClass("field_error")},d.prototype.highLightRowErrors=function(e){for(var t=0;t<e.length;t++)switch(e[t]){case"origin":this.highlightRow(this.getOriginField());break;case"target":this.highlightRow(this.getTargetField());break;case"type":this.highlightRow(this.getTypeField())}},d.prototype.highlightRow=function(e){jQuery(e).closest("div.redirect_form_row").addClass("field_error")};var c=function(e,t){this.form=e,this.type=t,this.validationError=""};c.prototype.validate=function(){return this.form.clearErrorMessage(),this.form.removeRowHighlights(),!1!==this.runValidation(this.form.getOriginField(),this.form.getTargetField(),this.form.getTypeField())||(this.addValidationError(this.validationError),!1)},c.prototype.runValidation=function(e,t,i){if(""===e.val())return this.form.highlightRow(e),"plain"===this.type?this.setError(wpseoPremiumStrings.error_old_url):this.setError(wpseoPremiumStrings.error_regex);if(-1===jQuery.inArray(parseInt(i.val(),10),r)){if(""===t.val())return this.form.highlightRow(t),this.setError(wpseoPremiumStrings.error_new_url);if(t.val()===e.val())return this.form.highlightRow(t),this.setError(wpseoPremiumStrings.error_circular)}return""!==i.val()||(this.form.highlightRow(i),this.setError(wpseoPremiumStrings.error_new_type))},c.prototype.setError=function(e){return this.validationError=e,!1},c.prototype.addValidationError=function(e,t){this.form.setErrorMessage(e),void 0!==t&&this.form.highLightRowErrors(t)},c.prototype.getFormValues=function(){var e={origin:this.form.getOriginField().val().toString(),target:this.form.getTargetField().val().toString(),type:this.form.getTypeField().val().toString()};return jQuery.inArray(parseInt(e.type,10),r)>-1&&(e.target=""),e};var l=function(){this.row=null,this.quickEditRow=null};l.prototype.setup=function(r,i){this.row=r,this.quickEditRow=e(t({origin:_.unescape(i.origin.html()),target:_.unescape(i.target.html()),type:parseInt(i.type.html(),10),suffix:e("#the-list").find("tr").index(r)}))},l.prototype.getRow=function(){return this.row},l.prototype.getForm=function(){return this.quickEditRow},l.prototype.show=function(){this.row.addClass("hidden"),this.quickEditRow.insertAfter(this.row).show(400,function(){e(this).find(":input").first().focus()})},l.prototype.remove=function(){this.row.removeClass("hidden"),this.quickEditRow.remove()};var p=new l;e.widget("ui.dialog",e.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:function(e){this.close(e)}})}}),e.fn.wpseoRedirects=function(t){var l,u=this,h=t.replace("table-",""),g=!1,f=null,m=function(){g=!1,l=null};this.getButtons=function(t){return"default"===t?[{text:wpseoPremiumStrings.button_ok,click:function(){e(this).dialog("close")}}]:[{text:wpseoPremiumStrings.button_cancel,click:function(){m(),e(this).dialog("close")}},{text:wpseoPremiumStrings.button_save_anyway,class:"button-primary",click:function(){g=!0,l(),e(this).dialog("close"),m()}}]},this.rowCells=function(e){var t=e.find(".val");return{origin:t.eq(o),target:t.eq(n),type:t.eq(s)}},this.dialog=function(t,r,i){void 0!==i&&"error"!==i||(i="default");var o=this.getButtons(i);e("#YoastRedirectDialogText").html(r),e("#YoastRedirectDialog").dialog({title:t,width:500,draggable:!1,resizable:!1,position:{at:"center center",my:"center center",of:window},buttons:o,modal:!0,close:function(){f&&f.focus()}})},this.openDialog=function(e){this.dialog(e.title,e.message)},this.post=function(t,r){e.post(ajaxurl,t,r,"json")},this.editRow=function(t){e("#the-list").find("#inline-edit").length>0?this.dialog(wpseoPremiumStrings.edit_redirect,wpseoPremiumStrings.editing_redirect):(p.setup(t,this.rowCells(t)),p.show(),new d(p.quickEditRow).getTypeField().trigger("change"))},this.createRedirectRow=function(t,r,i,o){var n=["val"];return o.isTargetRelative&&""!==r&&"/"!==r||n.push("remove-slashes"),o.hasTrailingSlash&&n.push("has-trailing-slash"),e("<tr>").append(e("<th>").addClass("check-column").attr("scope","row").append(e("<input>").attr("name","wpseo_redirects_bulk_delete[]").attr("type","checkbox").val(_.escape(t)))).append(e("<td>").addClass("type column-type has-row-actions column-primary").append(e("<div>").addClass("val type").html(_.escape(i))).append(e("<div>").addClass("row-actions").append(e("<span>").addClass("edit").append(e("<a>").attr({href:"#",role:"button",class:"redirect-edit"}).html(wpseoPremiumStrings.editAction)).append(" | ")).append(e("<span>").addClass("trash").append(e("<a>").attr({href:"#",role:"button",class:"redirect-delete"}).html(wpseoPremiumStrings.deleteAction))))).append(e("<td>").addClass("column-old").append(e("<div>").addClass("val").html(_.escape(t)))).append(e("<td>").addClass("column-new").append(e("<div>").addClass(n.join(" ")).html(_.escape(r))))},this.handleError=function(e,t){e.addValidationError(t.message,t.fields),"warning"===t.type&&u.dialog(wpseoPremiumStrings.error_saving_redirect,t.message,t.type)},this.addRedirect=function(){var t=new d(e(".wpseo-new-redirect-form")),r=new c(t,h);if(!1===r.validate())return!1;var i=r.getFormValues();return u.post({action:"wpseo_add_redirect_"+h,ajax_nonce:e(".wpseo_redirects_ajax_nonce").val(),redirect:{origin:encodeURIComponent(i.origin),target:encodeURIComponent(i.target),type:i.type},ignore_warning:g},function(i){if(i.error)return u.handleError(r,i.error),!0;t.getOriginField().val(""),t.getTargetField().val(""),u.find(".no-items").remove();var o=u.createRedirectRow(i.origin,i.target,i.type,i.info);e("form#"+h).find("#the-list").prepend(o),u.openDialog(wpseoPremiumStrings.redirect_added)}),!0},this.updateRedirect=function(){var t=new d(p.getForm()),r=new c(t,h);if(!1===r.validate())return!1;var i=r.getFormValues(),o=p.getRow(),n=this.rowCells(o);return u.post({action:"wpseo_update_redirect_"+h,ajax_nonce:e(".wpseo_redirects_ajax_nonce").val(),old_redirect:{origin:encodeURIComponent(n.origin.html()),target:encodeURIComponent(n.target.html()),type:encodeURIComponent(n.type.html())},new_redirect:{origin:encodeURIComponent(i.origin),target:encodeURIComponent(i.target),type:encodeURIComponent(i.type)},ignore_warning:g},function(e){if(e.error)return u.handleError(r,e.error),!0;n.origin.html(_.escape(e.origin)),n.target.html(_.escape(e.target)),n.type.html(_.escape(e.type)),p.remove(),u.openDialog(wpseoPremiumStrings.redirect_updated)}),!0},this.deleteRedirect=function(t){var r=this,o=this.rowCells(t),n=o.origin.html(),s=o.target.html(),a=o.type.html(),d=h;(0,i.wpseoDeleteRedirect)(n,s,a,d).then(function(r){t.fadeTo("fast",0).slideUp(function(){e(this).remove()}),u.openDialog(r)}).catch(function(e){r.dialog(e.title,e.message,"error")})},this.setup=function(){var t;e("body").append('<div id="YoastRedirectDialog"><div id="YoastRedirectDialogText"></div></div>'),e(window).on("beforeunload",function(){if(e("#the-list").find("#inline-edit").length>0)return wpseoPremiumStrings.unsaved_redirects}),e(".redirect-table-tab").on("change","select[name=wpseo_redirects_type]",function(t){var i=parseInt(e(t.target).val(),10),o=e(t.target).closest(".wpseo_redirect_form").find(".wpseo_redirect_target_holder");jQuery.inArray(i,r)>-1?e(o).hide():e(o).show()}),e(".wpseo-new-redirect-form").on("click",".button-primary",function(){return l=function(){u.addRedirect()},u.addRedirect(),f=e(this),!1}).on("keypress","input",function(e){e.which===a&&(l=function(){u.addRedirect()},e.preventDefault(),u.addRedirect())}),e(".wp-list-table").on("click",".redirect-edit",function(r){t=e(r.target).closest("tr"),r.preventDefault(),u.editRow(t),f=e(this)}).on("click",".redirect-delete",function(r){t=e(r.target).closest("tr"),r.preventDefault(),u.deleteRedirect(t),f=e("#cb-select-all-1")}).on("keypress","input",function(e){e.which===a&&(l=function(){u.updateRedirect()},e.preventDefault(),u.updateRedirect())}).on("click",".save",function(){(l=function(){u.updateRedirect()})()}).on("click",".cancel",function(){l=null,p.remove(),t.find(".redirect-edit").focus()})},u.setup()},e(function(){t=wp.template("redirects-inline-edit"),e.each(e(".redirect-table-tab"),function(t,r){e(r).wpseoRedirects(e(r).attr("id"))}),e("#wpseo_redirects_type").select2({width:"400px",language:wpseoSelect2Locale})})}(jQuery)},79:function(e,t){e.exports=window.wp.apiFetch}},[[640,0]]]);