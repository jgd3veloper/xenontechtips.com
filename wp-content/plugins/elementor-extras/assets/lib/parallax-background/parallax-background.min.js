!function(e,a,t,r){a.requestAnimationFrame&&(e.parallaxBackground=function(r,n){var o={parallaxResizeWatch:null,parallaxBgImage:"",parallaxBgPosition:"center center",parallaxBgRepeat:"no-repeat",parallaxBgSize:"cover",parallaxSpeed:.5,parallaxSpeedTablet:.5,parallaxSpeedMobile:.5,parallaxDirection:"down",breakpoints:{mobile:768,tablet:1024}},i=this;i.opts={};var l,p,s,c,d,u,x,f,g,h,m,b,k,v,D,w,B=e(r),S=null,T=e(a),z=0,_=0,E=0,M=0,y=1,I=(T.get(0).pageYOffset||t.documentElement.scrollTop)-(t.documentElement.clientTop||0),R=!0,W=0;i.init=function(){i.opts=e.extend({},o,n),i._construct()},i._construct=function(){i.setup(),i.events()},i.render=function(){!0!==R&&i.move(),a.requestAnimationFrame(i.render),R=!0},i.setup=function(){B.css("background-image","none"),B.find(".ee-parallax").length<1&&B.prepend('<div class="ee-parallax"></div>'),S=B.find(".ee-parallax"),S.find(".ee-parallax__inner").length<1&&S.prepend('<div class="ee-parallax__inner"></div>'),l=S.find(".ee-parallax__inner"),p=i.getElementSize(S),s=i.repositionBackground(S,p),B.css({"z-index":0}),l.css({position:"absolute",width:p[0],height:p[1],transform:"translate3d("+s[0]+"px, "+s[1]+"px, "+s[2]+"px)","z-index":"-1"}),"left"!==i.opts.parallaxDirection&&"right"!==i.opts.parallaxDirection||(d=0,u=s[0]),"up"!==i.opts.parallaxDirection&&"down"!==i.opts.parallaxDirection||(d=0,u=s[1]),W=B.visible(!0)?T.scrollTop():S.offset().top},i.refresh=function(){setTimeout(function(){i.adjust()},100),i.move()},i.events=function(){e(t).ready(function(){i.render()}),T.on("resize",i.refresh),i.opts.parallaxResizeWatch&&i.opts.parallaxResizeWatch._resize(i.refresh),T.on("scroll",function(){!0===R&&(I=(a.pageYOffset||t.documentElement.scrollTop)-(t.documentElement.clientTop||0)),R=!1})},i.getElementSize=function(e){return f=e.width(),c=e.height(),D=T.height(),w=T.width(),y=i.isMobile()?2:1,"left"!==i.opts.parallaxDirection&&"right"!==i.opts.parallaxDirection||(f+=y*Math.ceil(w*i.getSpeed())),"up"!==i.opts.parallaxDirection&&"down"!==i.opts.parallaxDirection||(c+=y*Math.ceil(D*i.getSpeed())),[f,c]},i._getProgress=function(){return(I-l.offset().top+D)/(D+c)},i.repositionBackground=function(e,a){switch(m=parseInt(e.css("padding-left").replace("px","")),b=parseInt(e.css("padding-right").replace("px","")),g=parseInt(e.css("padding-top").replace("px","")),h=parseInt(e.css("padding-bottom").replace("px","")),k=(a[1]-e.outerHeight())/2,v=(a[0]-e.outerWidth())/2,i.opts.parallaxDirection){case"up":case"down":z=-m,_=-(k+g),E=0;break;case"left":case"right":z=-(v+m),_=-g,E=0}return[z,_,E]},i.adjust=function(){p=i.getElementSize(S),s=i.repositionBackground(S,p),"left"!==i.opts.parallaxDirection&&"right"!==i.opts.parallaxDirection||(d=0,u=s[0]),"up"!==i.opts.parallaxDirection&&"down"!==i.opts.parallaxDirection||(d=0,u=s[1]),l.css({width:p[0],height:p[1],transform:"translate3d("+s[0]+"px, "+s[1]+"px, "+s[2]+"px)"})},i.move=function(){B.visible(!0)&&(M=T.scrollTop()-W,d=M*(i.getSpeed()/4),"up"===i.opts.parallaxDirection&&(u+=-d,x="translate3d("+s[0]+"px, "+u+"px, "+s[2]+"px)"),"down"===i.opts.parallaxDirection&&(u+=d,x="translate3d("+s[0]+"px, "+u+"px, "+s[2]+"px)"),"left"===i.opts.parallaxDirection&&(u+=d,x="translate3d("+u+"px, "+s[1]+"px, "+s[2]+"px)"),"right"===i.opts.parallaxDirection&&(u+=-d,x="translate3d("+u+"px, "+s[1]+"px, "+s[2]+"px)"),l.css({width:p[0],height:p[1],transform:x}),W=T.scrollTop())},i.getSpeed=function(){var e=i.opts.parallaxSpeed;return i.isTablet()?e=i.opts.parallaxSpeedTablet:i.isMobile()&&(e=i.opts.parallaxSpeedMobile),parseFloat(e)},i.isTablet=function(){return T.width()<i.opts.breakpoints.tablet&&T.width()>=i.opts.breakpoints.mobile},i.isMobile=function(){return T.width()<i.opts.breakpoints.tablet&&T.width()<i.opts.breakpoints.mobile},i.isDesktop=function(){return T.width()>i.opts.breakpoints.tablet},i.destroy=function(){S.remove(),l.remove(),B.css("background-image",""),B.removeData("parallaxBackground")},i.init()},e.fn.parallaxBackground=function(a){return this.each(function(){if(e.fn.parallaxBackground.destroy=function(){void 0!==t&&(e(this).data("parallaxBackground").destroy(),e(this).removeData("parallaxBackground"))},void 0===e(this).data("parallaxBackground")){var t=new e.parallaxBackground(this,a);e(this).data("parallaxBackground",t)}})})}(jQuery,window,document);