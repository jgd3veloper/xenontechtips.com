!function(e,i,a,o){e.imageComparison=function(a,o){var n={scope:e(i),editMode:!1,clickToMove:!1,clickLabels:!1,animateClick:!0},s=this;s.opts={};var t=null,l=(e(i),e(a)),r=null,d=null,m=!1,c=!1,f=!1;s.init=function(){s.opts=e.extend({},n,o),s._construct()},s._construct=function(){t=s.opts.scope,r=l.find(".ee-image-comparison__label--original"),d=l.find(".ee-image-comparison__label--modified"),s.checkPosition(),s.setup(),s.events()},s.checkPosition=function(){l.is(".is--visible")||(s.opts.animation?t.scrollTop()+1*t.height()>l.offset().top&&s.animateIn():s.animateIn(),c=!1)},s.animateIn=function(){l.addClass("is--visible"),TweenMax.from(l.find(".ee-image-comparison__image"),.7,{width:"0%",ease:Back.easeOut.config(.7),clearProps:"all"})},s.updateLabel=function(e,i,a,o){"left"==o?e.offset().left+e.outerWidth()+i.outerWidth()/2<a.offset().left+a.outerWidth()?e.removeClass("is--hidden"):e.addClass("is--hidden"):e.offset().left>a.offset().left+a.outerWidth()+i.outerWidth()/2?e.removeClass("is--hidden"):e.addClass("is--hidden")},s.setup=function(){s.drags(l.find(".ee-image-comparison__handle"),l.find(".ee-image-comparison__image"),l,r,d)},s.events=function(){t.on("scroll",function(){c||(c=!0,i.requestAnimationFrame?requestAnimationFrame(function(){s.checkPosition()}):setTimeout(function(){s.checkPosition()},100))}),t.on("resize",function(){f||(f=!0)}),s.opts.clickToMove&&!s.opts.editMode&&(s.opts.clickLabels&&(r.on("click",function(e){s.onBeforeLabelClick(),s.updatePosition(0,r,d,l.find(".ee-image-comparison__image"),!0),s.onAfterLabelClick()}),d.on("click",function(e){s.onBeforeLabelClick(),s.updatePosition(l.outerWidth(),r,d,l.find(".ee-image-comparison__image"),!0),s.onAfterLabelClick()})),l.on("click",function(i){if(!e(i.target).is(".ee-image-comparison__label")){l.find(".ee-image-comparison__image").addClass("resizable"),l.find(".ee-image-comparison__handle").addClass("draggable");var a=(i.pageX-l.offset().left)/l.outerWidth()*100+"%";s.updatePosition(a,r,d,l.find(".ee-image-comparison__image"),s.opts.animateClick),l.find(".ee-image-comparison__image").removeClass("resizable"),l.find(".ee-image-comparison__handle").removeClass("draggable")}}))},s.onBeforeLabelClick=function(){l.find(".ee-image-comparison__image").addClass("resizable"),l.find(".ee-image-comparison__handle").addClass("draggable")},s.onAfterLabelClick=function(){l.find(".ee-image-comparison__image").removeClass("resizable"),l.find(".ee-image-comparison__handle").removeClass("draggable")},s.drags=function(e,a,o,n,t){e.on("mousedown vmousedown",function(l){e.addClass("draggable"),a.addClass("resizable");var r=e.outerWidth(),d=e.offset().left+r-l.pageX,c=o.offset().left,f=o.outerWidth(),u=c-r/2,g=c+f-r/2;e.parents().on("mousemove vmousemove",function(e){m||(m=!0,i.requestAnimationFrame?requestAnimationFrame(function(){s.animateDraggedHandle(e,d,r,u,g,c,f,a,n,t)}):setTimeout(function(){s.animateDraggedHandle(e,d,r,u,g,c,f,a,n,t)},100))}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")}),l.preventDefault()}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")})},s.animateDraggedHandle=function(i,a,o,n,t,r,d,c,f,u){var g=i.pageX+a-o;g<n?g=n:g>t&&(g=t);var p=100*(g+o/2-r)/d+"%";l.find(".draggable").css("left",p).on("mouseup vmouseup",function(){e(this).removeClass("draggable"),c.removeClass("resizable")}),s.updatePosition(p,f,u,c,!1),m=!1},s.updatePosition=function(e,i,a,o,n){var t=l.find(".draggable"),r=l.find(".resizable");n?(TweenMax.to(t,.2,{left:e}),TweenMax.to(r,.2,{width:e})):(t.css("left",e),r.css("width",e)),s.updateLabel(a,l.find(".ee-image-comparison__handle"),o,"left"),s.updateLabel(i,l.find(".ee-image-comparison__handle"),o,"right")},s.destroy=function(){l.removeData("imageComparison")},s.init()},e.fn.imageComparison=function(i){return this.each(function(){if(void 0===e(this).data("imageComparison")){var a=new e.imageComparison(this,i);e(this).data("imageComparison",a)}})}}(jQuery,window,document);