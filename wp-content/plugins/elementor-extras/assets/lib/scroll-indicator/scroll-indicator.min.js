!function(e,t,n,o){e.scrollIndicator=function(o,r){var i={scope:e(t),progress:"circle",autoHover:!0,click:!0,property:"width"},l=this;l.opts={};var c=null,a=null,s=e(o),u=null,d=null,f=null,p=null,h=null,m=!1,g=!1,d=null,k=null,v=null,_=null,C=null,S=null,b=null,q=null,I=null,y=null,H=null,R=null;l.init=function(){l.opts=e.extend({},i,r),l._construct()},l._construct=function(){l.setup(),u.length&&(l.events(),l.update())},l.setup=function(){c=l.opts.scope,a=e("body"),u=e(""),I=s.find(".ee-scroll-indicator__element__link"),$elements=s.find(".ee-scroll-indicator__element"),f=parseInt(Math.PI*(2*$elements.eq(0).find("circle").attr("r"))),p=c.height(),h=e(n).height(),s.addClass("is--active"),$elements.each(function(){var t=e(this).data("selector"),n=e("#"+t);n.length&&(u=u.add(n))}),u.length||(u=u.add(e("body")))},l.events=function(){c.on("scroll",l.checkRead),c.on("resize",l.resetScroll),l.opts.click&&s.on("click","a",l.onClick)},l.onClick=function(t){t.preventDefault();var n=u.eq(e(this).parent("li").index()),o=n.offset().top;c.off("scroll",l.checkRead),e("body,html").animate({scrollTop:o+2},300,function(){l.checkRead(),c.on("scroll",l.checkRead)})},l.getChapters=function(){return s.find(".ee-scroll-indicator__element")},l.getDefaultSectionLink=function(){return l.getChapters().eq(0).children(".ee-scroll-indicator__element__link")},l.getSectionLink=function(e){var t=e.attr("id"),n=l.getDefaultSectionLink();return t&&($_element=l.getChapters().filter("[data-selector="+t+"]").children(".ee-scroll-indicator__element__link"),$_element.length&&(n=$_element)),n},l.isLastSection=function(e){return e+1===u.length},l.isVisibleAtEnd=function(e){return p>h-(u.eq(e).offset().top+u.eq(e).outerHeight())},l.isWindowTaller=function(e){return p>=u.eq(e).outerHeight()},l.update=function(){d=c.scrollTop(),u.each(function(t,n){var o=e(this);I.not(":eq("+t+")");l.updateSectionVars(t,o),R.length&&(b?b&&q?(R.addClass("is--reading").removeClass("is--read"),l.opts.autoHover&&R.trigger("mouseenter"),l.progress(t,o)):(l.opts.autoHover&&R.trigger("mouseleave"),R.removeClass("is--reading").addClass("is--read")):(R.removeClass("is--read is--reading"),l.opts.autoHover&&R.trigger("mouseleave")))}),m=!1},l.progress=function(e,t){"circle"===l.opts.progress?l.updateCircle(e,t):"background"===l.opts.progress&&l.updateBackground(e,t)},l.updateCircle=function(e,t){l.updateSectionVars(e,t);var n=R.find("circle"),o=f*((y+S-d)/H);n.attr({"stroke-dashoffset":o})},l.updateBackground=function(e,t){l.updateSectionVars(e,t);var n=R.find(".ee-scroll-indicator__element__progress"),o=100-(y+S-d)/H*100,r={};r[l.opts.property]=o+"%",n.css(r)},l.checkRead=function(){m||(m=!0,t.requestAnimationFrame?t.requestAnimationFrame(l.update):setTimeout(l.update,300))},l.resetScroll=function(){g||(g=!0,t.requestAnimationFrame?t.requestAnimationFrame(l.updateParams):setTimeout(l.updateParams,300),l.checkRead())},l.updateSectionVars=function(e,t){d=c.scrollTop(),y=t.offset().top,H=t.outerHeight(),R=l.getSectionLink(t),k=d>=y,v=d+p>=y,_=d+p<=y+H,C=d<=y+H,b=k,q=C,S=H;var n=l.getSectionLink(t).parent().data("start"),o=l.getSectionLink(t).parent().data("end");"bottom-top"===n&&"bottom-bottom"===o?(b=v,q=_,circleHeight=H+p,S=H-p):"top-top"===n&&"bottom-bottom"===o?(b=k,q=_,H-=p,circleHeight=H+p,S=H):"bottom-top"===n&&"top-bottom"===o&&(b=v,q=C,H+=p)},l.updateParams=function(){h=e(n).height(),p=e(t).height(),c.off("scroll",l.checkRead),c.on("scroll",l.checkRead),g=!1},l.destroy=function(){c.off("scroll",l.checkRead),c.off("resize",l.resetScroll),s.off("click","a",l.onClick),s.removeClass("is--active")},l.init()},e.fn.scrollIndicator=function(t){return this.each(function(){if(e.fn.scrollIndicator.destroy=function(){void 0!==n&&(e(this).data("scrollIndicator").destroy(),e(this).removeData("scrollIndicator"))},void 0===e(this).data("scrollIndicator")){var n=new e.scrollIndicator(this,t);e(this).data("scrollIndicator",n)}})}}(jQuery,window,document);